# Comment Service API

API для управления комментариями.  
Доступны три группы эндпоинтов: административные, приватные и публичные.
---

## Административные эндпоинты

Доступны по префиксу `/admin`.

### Удаление комментария

`DELETE /admin/comments/{commentId}`

- Удаляет комментарий по его идентификатору (только для администраторов).
- Возвращает статус `204 NO CONTENT` при успешном удалении.
- Возвращает статус `404 NOT FOUND`, если комментарий не найден.

**Параметры:**
- `commentId` - ID комментария для удаления.

### Обновление комментария

`PATCH /admin/comments/{commentId}`

- Обновляет комментарий по его идентификатору (только для администраторов).
- Возвращает статус `200 OK` при успешном удалении.
- Возвращает статус `404 NOT FOUND`, если комментарий не найден.
- Тело запроса должно быть валидным согласно DTO `MergeCommentRequest`.

**Параметры:**
- `commentId` - ID комментария для удаления.

---
## Приватные эндпоинты

Доступны по префиксу `/users/{userId}/comments`.

### Создание комментария

`POST /users/{userId}/comments`

- Создает новый комментарий от имени пользователя.
- Возвращает созданный комментарий со статусом `201 CREATED`.
- Возвращает статус `409 CONFLICT` при попытке добавить комментарий к неопубликованному событию.
- Возвращает статус `404 NOT FOUND` если пользователь или событие с указанными id не найдены.
- Тело запроса должно быть валидным согласно DTO `MergeCommentRequest`.

**Параметры:**
- `userId` - ID пользователя, создающего комментарий.

### Удаление комментария пользователем

`DELETE /users/{userId}/comments/{commentId}`

- Удаляет комментарий, если он принадлежит указанному пользователю.
- Возвращает статус `204 NO CONTENT` при успешном удалении.
- Возвращает `404 NOT FOUND`, если комментарий с указанными id и id пользователя не найден.

**Параметры:**
- `userId` - ID пользователя, который удаляет комментарий.
- `commentId` - ID комментария для удаления.

### Обновление комментария

`PATCH /users/{userId}/comments/{commentId}`

- Обновляет комментарий по его идентификатору и идентификатору создателя.
- Возвращает статус `200 OK` при успешном удалении.
- Возвращает статус `404 NOT FOUND`, если комментарий не найден.
- Тело запроса должно быть валидным согласно DTO `MergeCommentRequest`.

**Параметры:**
- `commentId` - ID комментария для удаления.
- `userId` - ID пользователя, чей комментарий нужно обновить.

### Получение всех комментариев пользователя

`GET /users/{userId}/comments`
- Возвращает коллекцию всех комментариев, созданных указанным пользователем, отсортированную по дате создания комментария в порядке убывания.
- Статус ответа `200 OK`.

**Параметры:**
- `userId` - ID пользователя, чьи комментарии нужно получить.

### Получение всех комментариев пользователя к событию

`GET /users/{userId}/comments/events/{eventId}`
- Возвращает коллекцию всех комментариев, созданных указанным пользователем к указанному событию, отсортированную по дате создания комментария в порядке убывания.
- Статус ответа `200 OK`.

**Параметры:**
- `userId` - ID пользователя, чьи комментарии нужно получить.
- `eventId` - ID события, комментарии которого нужно получить.

---
## Публичные эндпоинты

Доступны по префиксу `/comments`.

### Получение комментариев события
`GET /comments/event/{eventId}`

- Возвращает коллекцию всех комментариев для указанного события, отсортированную по дате создания комментария в порядке убывания.
- Статус ответа 200 OK.

**Параметры:**
- `eventId` - ID события, для которого запрашиваются комментарии.

### Получение комментария по ID
`GET /comments/{commentId}`

- Возвращает комментарий с указанным ID.
- Статус ответа 200 OK.

**Параметры:**
- `commentId` - ID комментария, который нужно получить.